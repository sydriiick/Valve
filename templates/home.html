{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Engtek</title>

  
    
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog=="crossorigin="anonymous"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.23/css/dataTables.bootstrap5.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/1.6.5/css/buttons.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/yadcf/0.8.3/jquery.dataTables.yadcf.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/eonasdan-bootstrap-datetimepicker/4.17.49/css/bootstrap-datetimepicker.min.css">

    <style>
        body { 
            padding-right: 0px !important;
            overflow-y: hidden !important;
            background-color: #f5f5f5;
        }
        .error {
            background-color: rgb(238, 110, 106);
        }
    </style>
</head>

<body>

    <div class="container-fluid m-1 bg-light" id="container" >
        
        <div class="row">
            <div class="col-md-7 card border-secondary  p-1">
                <div class="card-header">
                    Station 1
                    <div class="float-end border p-1">
                        <form action="{% url 'home' %}" method="post">{% csrf_token %}
                            Tolerance
                            <label for="minimum">min:</label>
                            <input type="float" name="minimum" size="5" value="{{s1.minimum}}">
                            <label for="maximum">max:</label>
                            <input type="float" name="maximum" size="5" value="{{s1.maximum}}">
                            <input type="submit" value="Save">
                            <input type="hidden" name="station" value="{{s1.station}}">
                        </form>
                    </div>
                </div>
                <div class="card-body bg-light">
                    <div class="table-responsive">
                            <table id="table1" class="display compact" style="width:100%">
                                <thead>
                                    <tr role="row">
                                        <th>ID</th>
                                        <th>Data 1</th>
                                        <th>Data 2</th>
                                        <th>Data 3</th>
                                        <th>Timestamp</th>
                                    </tr>
                                </thead>
                                <tbody id="body1">
                                    {% if one_list %}
                                        {% for one in one_list %}
                                            {% if one.data_1 < s1.minimum or one.data_1 > s1.maximum %}
                                                <tr role="row" style="background-color:#fd6233;" >
                                            {% else %}
                                                <tr role="row">
                                            {% endif %}
                                                    <td>{{ one.id}}</td>
                                                    <td>{{ one.data_1 }}</td>
                                                    <td>{{ one.data_2 }}</td>
                                                    <td>{{ one.data_3 }}</td>
                                                    <td>{{ one.date_created|date:'m-d-Y H:i a' }}</td>
                                                </tr>
                                        {% endfor%}
                                    {% endif %}
                                </tbody>
                            </table>    
                    </div>
                </div>
            </div>
            <div class="col-md-5 card border-secondary p-1">
                <div class="card-header">
                    Station 2
                    <div class="float-end border p-1">
                        <form action="{% url 'home' %}" method="post">{% csrf_token %}
                            Tolerance
                            <label for="minimum">min:</label>
                            <input type="float" name="minimum" size="5" value="{{s2.minimum}}">
                            <label for="maximum">max:</label>
                            <input type="float" name="maximum" size="5" value="{{s2.maximum}}">
                            <input type="submit" value="Save">
                            <input type="hidden" name="station" value="{{s2.station}}">
                        </form>
                    </div>
                </div>
                <div class="card-body bg-light">
                    <div class="table-responsive">
                        <table id="table2" class="display compact" style="width:100%">
                            <thead>
                                <tr role="row">
                                    <th>ID</th>
                                    <th>Data</th>
                                    <th>Timestamp</th>
                                </tr>
                            </thead>
                            <tbody id="body2">
                                {% if two_list %}
                                    {% for two in two_list %}
                                        {% if two.data < s2.minimum or two.data > s2.maximum %}
                                            <tr role="row" style="background-color:#fd6233;" >
                                        {% else %}
                                            <tr role="row">
                                        {% endif %}
                                                <td>{{ two.id}}</td>
                                                <td>{{ two.data }}</td>
                                                <td>{{ two.date_created|date:'m-d-Y H:i a' }}</td>
                                            </tr>
                                    {% endfor%}
                                {% endif %}
                            </tbody>
                        </table>        
                    </div>
                </div>
            </div>
        </div>
        <div class="row">       
            <div class="col card border-secondary p-1">
                <div class="card-header">
                    Station 4
                    <div class="float-end border p-1">
                        <form action="{% url 'home' %}" method="post">{% csrf_token %}
                            Tolerance
                            <label for="minimum">min:</label>
                            <input type="float" name="minimum" size="5" value="{{s4.minimum}}">
                            <label for="maximum">max:</label>
                            <input type="float" name="maximum" size="5" value="{{s4.maximum}}">
                            <input type="submit" value="Save">
                            <input type="hidden" name="station" value="{{s4.station}}">
                        </form>
                    </div>
                </div>
                <div class="card-body bg-light">
                    <div class="table-responsive">
                        <table id="table3" class="display compact" style="width:100%">
                            <thead>
                                <tr role="row">
                                    <th>ID</th>
                                    <th>Data</th>
                                    <th>Timestamp</th>
                                </tr>
                            </thead>
                            <tbody id="body3">
                                {% if four_list %}
                                    {% for four in four_list %}
                                        {% if four.data < s4.minimum or four.data > s4.maximum %}
                                            <tr role="row" style="background-color:#fd6233;" >
                                        {% else %}
                                            <tr role="row">
                                        {% endif %}
                                                <td>{{ four.id}}</td>
                                                <td>{{ four.data }}</td>
                                                <td>{{ four.date_created|date:'m-d-Y H:i a' }}</td>
                                            </tr>
                                    {% endfor%}
                                {% endif %}
                            </tbody>
                        </table>        
                    </div>
                </div>
            </div>
            <div class="col card border-secondary p-1">
                <div class="card-header">
                    Station 5
                    <div class="float-end border p-1">
                        <form action="{% url 'home' %}" method="post">{% csrf_token %}
                            Tolerance
                            <label for="minimum">min:</label>
                            <input type="float" name="minimum" size="5" value="{{s5.minimum}}">
                            <label for="maximum">max:</label>
                            <input type="float" name="maximum" size="5" value="{{s5.maximum}}">
                            <input type="submit" value="Save">
                            <input type="hidden" name="station" value="{{s5.station}}">
                        </form>
                    </div>
                </div>
                <div class="card-body bg-light">
                    <div class="table-responsive">
                        <table id="table4" class="display compact" style="width:100%">
                            <thead>
                                <tr role="row">
                                    <th>ID</th>
                                    <th>Data</th>
                                    <th>Timestamp</th>
                                </tr>
                            </thead>
                            <tbody id="body4">
                                {% if five_list %}
                                    {% for five in five_list %}
                                        {% if five.data < s5.minimum or five.data_1 > s5.maximum %}
                                            <tr role="row" style="background-color:#fd6233;" >
                                        {% else %}
                                            <tr role="row">
                                        {% endif %}
                                                <td>{{ five.id}}</td>
                                                <td>{{ five.data }}</td>
                                                <td>{{ five.date_created|date:'m-d-Y H:i a' }}</td>
                                            </tr>
                                    {% endfor%}
                                {% endif %}
                            </tbody>
                        </table>        
                    </div>
                </div>
            </div>
            <div class="col card border-secondary p-1">
                <div class="card-header">
                    Station 6
                    <div class="float-end border p-1">
                        <form action="{% url 'home' %}" method="post">{% csrf_token %}
                            Tolerance
                            <label for="minimum">min:</label>
                            <input type="float" name="minimum" size="5" value="{{s6.minimum}}">
                            <label for="maximum">max:</label>
                            <input type="float" name="maximum" size="5" value="{{s6.maximum}}">
                            <input type="submit" value="Save">
                            <input type="hidden" name="station" value="{{s6.station}}">
                        </form>
                    </div>
                </div>
                <div class="card-body bg-light ">
                    <div class="table-responsive">
                        <table id="table5" class="display compact" style="width:100%">
                            <thead>
                                <tr role="row">
                                    <th>ID</th>
                                    <th>Data</th>
                                    <th>Timestamp</th>
                                </tr>
                            </thead>
                            <tbody id="body5">
                                {% if six_list %}
                                    {% for six in six_list %}
                                        {% if six.data < s6.minimum or six.data_1 > s6.maximum %}
                                            <tr role="row" style="background-color:#fd6233;" >
                                        {% else %}
                                            <tr role="row">
                                        {% endif %}
                                                <td>{{ six.id}}</td>
                                                <td>{{ six.data }}</td>
                                                <td>{{ six.date_created|date:'m-d-Y H:i a' }}</td>
                                            </tr>
                                    {% endfor%}
                                {% endif %}
                            </tbody>
                        </table>        
                    </div>
                </div>
            </div>
        </div>
    </div>
    
           
  

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js" ></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/eonasdan-bootstrap-datetimepicker/4.17.49/js/bootstrap-datetimepicker.min.js"></script>

<script type="text/javascript" src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.10.23/js/dataTables.bootstrap5.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.5/js/dataTables.buttons.min.js"> </script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"> </script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"> </script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"> </script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.html5.min.js"> </script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.print.min.js"> </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/yadcf/0.9.4/jquery.dataTables.yadcf.js" integrity="sha512-stJr1VNN+I0yBoLYTHGUgHIeK8eibAXMzWdZn7SC8vO5FtzzWvQFPMaEWWSpOsnSrJ75GjKjOuJaJoghT3/8bw==" crossorigin="anonymous"></script>

<script>
    $(document).ready(function () {
    'use strict';

    $('#table1').dataTable({
        dom: 'Bfrt',
        scrollY: '30vh',
        responsive: true,
        scrollCollapse: true,
        paging: false,
        buttons: [
            'excel', 'pdf',
        ],
            language: {
                'paginate': {
                'previous': '<i class="fa fa-chevron-left"></i>',
                'next': '<i class="fa fa-chevron-right"></i>'
            }}
    }).yadcf([
        {
            column_number: 4,
            filter_type: "range_date",
            datepicker_type: 'bootstrap-datetimepicker',
            date_format: 'MM-DD-YYYY'
    
        }
    ]);

    $('#table2').dataTable({
        dom: 'Bfrt',
        scrollY: '50vh',
        responsive: true,
        scrollCollapse: true,
        paging: false,
        buttons: [
            'excel', 'pdf',
        ],
        language: {
                'paginate': {
                'previous': '<i class="fa fa-chevron-left"></i>',
                'next': '<i class="fa fa-chevron-right"></i>'
            }}
    }).yadcf([
        {
            column_number: 2,
            filter_type: "range_date",
            datepicker_type: 'bootstrap-datetimepicker',
            date_format: 'MM-DD-YYYY'
        }
    ]);

    $('#table3').dataTable({
        dom: 'Bfrt',
        scrollY: '50vh',
        responsive: true,
        scrollCollapse: true,
        paging: false,
        buttons: [
            'excel', 'pdf',
        ],
        language: {
                'paginate': {
                'previous': '<i class="fa fa-chevron-left"></i>',
                'next': '<i class="fa fa-chevron-right"></i>'
            }}

    }).yadcf([
        {
            column_number: 2,
            filter_type: "range_date",
            datepicker_type: 'bootstrap-datetimepicker',
            date_format: 'MM-DD-YYYY'
        }
    ]);

    $('#table4').dataTable({
        dom: 'Bfrt',
        scrollY: '50vh',
        responsive: true,
        scrollCollapse: true,
        paging: false,
        buttons: [
            'excel', 'pdf',
        ],
        language: {
                'paginate': {
                'previous': '<i class="fa fa-chevron-left"></i>',
                'next': '<i class="fa fa-chevron-right"></i>'
            }}
    }).yadcf([
        {
            column_number: 2,
            filter_type: "range_date",
            datepicker_type: 'bootstrap-datetimepicker',
            date_format: 'MM-DD-YYYY'
        }
    ]);

    $('#table5').dataTable({
        dom: 'Bfrt',
        scrollY: '50vh',
        responsive: true,
        scrollCollapse: true,
        paging: false,
        buttons: [
            'excel', 'pdf',
        ],
        language: {
                'paginate': {
                'previous': '<i class="fa fa-chevron-left"></i>',
                'next': '<i class="fa fa-chevron-right"></i>'
            }}
    }).yadcf([
        {
            column_number: 2,
            filter_type: "range_date",
            datepicker_type: 'bootstrap-datetimepicker',
            date_format: 'MM-DD-YYYY'
        }
    ]);
    

});


setInterval(function(){
    $.ajax({    
       url: '{% url "one_data" %}',
    })
    .done(function(response) {
        $('#body1').html(response);
        });
    $.ajax({    
       url: '{% url "two_data" %}',
    })
    .done(function(response) {
        $('#body2').html(response);
        });
    $.ajax({    
       url: '{% url "four_data" %}',
    })
    .done(function(response) {
        $('#body3').html(response);
        });
    $.ajax({    
       url: '{% url "five_data" %}',
    })
    .done(function(response) {
        $('#body4').html(response);
        });
    $.ajax({    
       url: '{% url "six_data" %}',
    })
    .done(function(response) {
        $('#body5').html(response);
        });


}, 1000)

// $('tbody tr td').each(

// function() {
//     var data = $('#body1').text();
//     console.log($(this))
//     if (data > {{s1.maximum}} || data < {{s1.minimum}} ) {
//         $(this).addClass('error');
//     }
// });
</script>
</body>
</html>